{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { ImagemComponent } from '../shared/imagem/imagem.component';\nimport { FormularioComponent } from '../shared/formulario/formulario.component';\nlet LoginComponent = class LoginComponent {\n  auth;\n  router;\n  fb;\n  form;\n  loading = false;\n  constructor(auth, router, fb) {\n    this.auth = auth;\n    this.router = router;\n    this.fb = fb;\n    this.form = this.fb.group({\n      cpf: ['', [Validators.required, Validators.pattern(/^\\d{3}\\.?\\d{3}\\.?\\d{3}-?\\d{2}$/)]],\n      senha: ['', [Validators.required, Validators.minLength(6)]]\n    });\n  }\n  login() {\n    if (this.form.invalid) return;\n    this.loading = true;\n    this.auth.login(this.form.value.cpf, this.form.value.senha).subscribe({\n      next: res => {\n        localStorage.setItem('token', res.token);\n        const payload = JSON.parse(atob(res.token.split('.')[1]));\n        if (payload.role === 'admin') {\n          this.router.navigate(['/admin/chat']);\n        } else {\n          this.router.navigate(['/cliente/chat']);\n        }\n      },\n      error: err => {\n        this.loading = false;\n        alert(err.message || 'Erro ao fazer login');\n      },\n      complete: () => this.loading = false\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  standalone: true,\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n  imports: [CommonModule, ReactiveFormsModule, RouterModule, MatCardModule, MatFormFieldModule, MatInputModule, MatButtonModule, MatProgressSpinnerModule, ImagemComponent,\n  // Adicione esta linha\n  FormularioComponent // Adicione esta linha\n  ]\n})], LoginComponent);\nexport { LoginComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}